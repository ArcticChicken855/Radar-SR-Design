
set(STRATA_TARGET_PLATFORM ${CMAKE_SYSTEM_NAME})
if(STRATA_TARGET_PLATFORM MATCHES "Darwin")
    set(STRATA_TARGET_PLATFORM Macos)
endif()

if(CMAKE_SYSTEM_PROCESSOR MATCHES "(x86)|(X86)|(amd64)|(AMD64)")
    set(STRATA_TARGET_ARCHITECTURE x86)
elseif(CMAKE_SYSTEM_PROCESSOR MATCHES "(arm)|(ARM)")
    set(STRATA_TARGET_ARCHITECTURE arm)
else()
    set(STRATA_TARGET_ARCHITECTURE UNKNOWN)
endif()

math(EXPR STRATA_BITNESS "${CMAKE_SIZEOF_VOID_P}*8")

string(TOUPPER "-DTARGET_PLATFORM_${STRATA_TARGET_PLATFORM}" STRATA_PLATFORM_DEFINES)

include(TestBigEndian)
test_big_endian(STRATA_TARGET_PLATFORM_BIG_ENDIAN)
if(STRATA_TARGET_PLATFORM_BIG_ENDIAN)
    set(STRATA_PLATFORM_DEFINES ${STRATA_PLATFORM_DEFINES} -DTARGET_PLATFORM_BIG_ENDIAN)
endif()
